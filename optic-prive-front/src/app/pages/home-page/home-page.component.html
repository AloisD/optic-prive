<app-banner></app-banner>
<app-header class="sticky-top"></app-header>
<app-categories></app-categories>

<body>
  <div class="container recent-product">
    <div class="row">
      <div class="col-6 col-md-4">
        <div class="trait"></div>
      </div>
      <div class="col-md-8">
        <p class="description">
          La première marketplace qui regroupe l’ensemble des marchés de la
          lunette (neuf, seconde main et reconditionnées) et qui permet aux
          professionnels de l’optique de mettre en vente leurs lunettes
          présentes en magasin sur le web.
        </p>
      </div>
    </div>
    <div class="news">
      <h4>LES NOUVEAUTÉS</h4>
    </div>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" style="list-style: none">
      <li *ngFor="let product of products">
        <div class="col">
          <div class="card h-100">
            <div class="cart-relative">
              <a [routerLink]="['produit', product.id]">
                <img
                  *ngIf="product.productImages.length"
                  src="https://localhost:8000/images/products/{{
                    product.productImages[0].path
                  }}"
                  class="card-img-top"
                  alt="{{ product.reference }}"
                />
              </a>
              <p class="top-right" *ngIf="((product.retail_price - product.selling_price) * -100 / product.retail_price) > 0">+ {{ ((product.retail_price - product.selling_price) * -100 / product.retail_price).toFixed(0) }} %</p>
              <p class="top-right" *ngIf="((product.retail_price - product.selling_price) * -100 / product.retail_price) <= 0">- {{ ((product.retail_price - product.selling_price) * 100 / product.retail_price).toFixed(0) }} %</p>
              <button
                type="button"
                class="btn cart-icon"
                (click)="addtocart(product)"
                (click)="addToCartMessage()"
              >
                <i class="bi bi-bag-plus"></i>
              </button>
            </div>
            <div class="card-body">
              <a [routerLink]="['produit', product.id]">
                <h5 class="card-title"> {{ product.brand.name }} </h5>

              <p > (Ref : {{ product.reference }}) </p>
              <span> <s>{{ product.retail_price }} €</s> </span>
              <span class="selling_price"> {{ product.selling_price }} € </span>
            </a>
            </div>
          </div>
        </div>
      </li>
    </div>
  </div>
</body>
